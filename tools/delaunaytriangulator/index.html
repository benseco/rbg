<!DOCTYPE html>
<html>
  <head>
  </head>

  <body>
    <canvas id="canvas" width="1024" height="1024">
    </canvas>

    <script type="text/javascript" src="delaunay.js">
    </script>

    <script type="text/javascript">
      var canvas = document.getElementById("canvas"),
          ctx = canvas.getContext("2d"),
          // vertices = new Array(2048),
          vertices = new Array(20),
          i, x, y;

      // for(i = vertices.length; i--; ) {
      //   do {
      //     x = Math.random() - 0.5;
      //     y = Math.random() - 0.5;
      //   } while(x * x + y * y > 0.25);

      //   x = (x * 0.96875 + 0.5) * canvas.width;
      //   y = (y * 0.96875 + 0.5) * canvas.height;

      //   vertices[i] = [x, y];
      // }

      // These are for the default game garden map
      // vertices = [
      //   [0,266], [151,266], [151,234], [291,234], [291, 396], [520,396], [520,243], [895,243], [895,298], [999,298],
      //   [999,436], [796,436], [796,690], [548,690], [548,761], [366,761], [366,648], [151,648], [151,390], [0,390]
      // ];

      //These are for the sample image
      // vertices = [
      //   [29,66],
      //   [29,67],
      //   [29,616],
      //   [29,617],
      //   [30,66],
      //   [30,67],
      //   [30,68],
      //   [30,615],
      //   [30,616],
      //   [30,617],
      //   [31,67],
      //   [31,68],
      //   [31,615],
      //   [31,616],
      //   [123,67],
      //   [123,68],
      //   [123,615],
      //   [123,616],
      //   [124,66],
      //   [124,67],
      //   [124,68],
      //   [124,615],
      //   [124,616],
      //   [124,617],
      //   [125,66],
      //   [125,67],
      //   [125,195],
      //   [125,196],
      //   [125,235],
      //   [125,236],
      //   [125,417],
      //   [125,420],
      //   [125,421],
      //   [125,466],
      //   [125,467],
      //   [125,470],
      //   [125,616],
      //   [125,617],
      //   [126,194],
      //   [126,195],
      //   [126,196],
      //   [126,235],
      //   [126,236],
      //   [126,237],
      //   [126,414],
      //   [126,415],
      //   [126,416],
      //   [126,417],
      //   [126,418],
      //   [126,420],
      //   [126,421],
      //   [126,466],
      //   [126,467],
      //   [126,469],
      //   [126,470],
      //   [126,471],
      //   [126,472],
      //   [126,473],
      //   [127,194],
      //   [127,195],
      //   [127,236],
      //   [127,237],
      //   [170,269],
      //   [170,617],
      //   [171,269],
      //   [171,270],
      //   [171,616],
      //   [171,617],
      //   [219,267],
      //   [220,267],
      //   [221,267],
      //   [222,267],
      //   [222,268],
      //   [223,267],
      //   [223,268],
      //   [224,267],
      //   [224,268],
      //   [225,267],
      //   [225,268],
      //   [272,616],
      //   [272,617],
      //   [273,617],
      //   [278,285],
      //   [278,286],
      //   [279,285],
      //   [279,286],
      //   [279,287],
      //   [280,286],
      //   [280,287],
      //   [280,288],
      //   [281,287],
      //   [281,288],
      //   [317,466],
      //   [317,467],
      //   [318,466],
      //   [318,467],
      //   [319,467],
      //   [319,468],
      //   [321,430],
      //   [321,431],
      //   [322,430],
      //   [322,431],
      //   [349,527],
      //   [349,528],
      //   [350,526],
      //   [350,527],
      //   [350,528],
      //   [350,529],
      //   [351,527],
      //   [351,528],
      //   [360,118],
      //   [360,119],
      //   [360,120],
      //   [360,310],
      //   [360,311],
      //   [360,312],
      //   [361,119],
      //   [361,120],
      //   [361,310],
      //   [361,311],
      //   [362,217],
      //   [362,218],
      //   [362,233],
      //   [362,234],
      //   [363,216],
      //   [363,217],
      //   [363,218],
      //   [363,233],
      //   [363,234],
      //   [363,235],
      //   [364,215],
      //   [364,216],
      //   [364,235],
      //   [364,236],
      //   [426,467],
      //   [426,468],
      //   [426,490],
      //   [426,564],
      //   [427,430],
      //   [427,431],
      //   [427,466],
      //   [427,467],
      //   [427,468],
      //   [427,490],
      //   [427,491],
      //   [427,563],
      //   [427,564],
      //   [428,430],
      //   [428,431],
      //   [428,432],
      //   [428,466],
      //   [428,467],
      //   [429,431],
      //   [429,432],
      //   [431,380],
      //   [431,381],
      //   [431,673],
      //   [431,674],
      //   [432,379],
      //   [432,380],
      //   [432,381],
      //   [432,673],
      //   [432,674],
      //   [432,675],
      //   [433,379],
      //   [433,380],
      //   [433,381],
      //   [433,673],
      //   [433,674],
      //   [433,675],
      //   [434,380],
      //   [434,674],
      //   [455,179],
      //   [455,180],
      //   [455,181],
      //   [455,270],
      //   [455,271],
      //   [455,272],
      //   [456,180],
      //   [456,181],
      //   [456,270],
      //   [456,271],
      //   [457,200],
      //   [457,201],
      //   [457,250],
      //   [457,251],
      //   [458,199],
      //   [458,200],
      //   [458,201],
      //   [458,250],
      //   [458,251],
      //   [458,252],
      //   [458,420],
      //   [458,421],
      //   [458,422],
      //   [458,423],
      //   [458,424],
      //   [459,199],
      //   [459,200],
      //   [459,251],
      //   [459,252],
      //   [459,280],
      //   [459,281],
      //   [459,422],
      //   [459,423],
      //   [459,424],
      //   [460,280],
      //   [460,281],
      //   [460,282],
      //   [461,281],
      //   [461,282],
      //   [471,449],
      //   [472,448],
      //   [472,449],
      //   [473,448],
      //   [473,449],
      //   [474,449],
      //   [474,450],
      //   [475,450],
      //   [481,463],
      //   [481,464],
      //   [481,465],
      //   [481,589],
      //   [481,590],
      //   [481,591],
      //   [482,463],
      //   [482,464],
      //   [482,590],
      //   [482,591],
      //   [516,449],
      //   [517,449],
      //   [518,449],
      //   [519,449],
      //   [520,448],
      //   [520,449],
      //   [521,448],
      //   [521,449],
      //   [522,448],
      //   [522,449],
      //   [528,54],
      //   [528,55],
      //   [529,54],
      //   [529,55],
      //   [529,56],
      //   [530,55],
      //   [556,448],
      //   [556,449],
      //   [559,202],
      //   [559,203],
      //   [559,248],
      //   [559,249],
      //   [559,618],
      //   [559,619],
      //   [559,620],
      //   [560,202],
      //   [560,203],
      //   [560,248],
      //   [560,249],
      //   [560,618],
      //   [560,619],
      //   [561,618],
      //   [596,281],
      //   [596,282],
      //   [596,446],
      //   [596,447],
      //   [597,280],
      //   [597,281],
      //   [597,282],
      //   [597,446],
      //   [597,447],
      //   [597,448],
      //   [598,280],
      //   [598,281],
      //   [598,447],
      //   [598,448]
      // ];

      vertices = [[30, 67], [ 30, 615], [124,  66], [124, 616], [126, 194], [126, 236], [125, 420], [125, 472], [170, 269], [170, 616], [224, 267], [272, 616], [280, 287], [318, 467], [321, 430], [350, 527], [361, 119], [361, 310], [363, 215], [363, 235], [427, 466], [427, 490], [427, 563], [428, 431], [433, 379], [433, 673], [456, 180], [456, 270], [458, 199], [458, 251], [458, 423], [460, 281], [474, 449], [481, 464], [481, 589], [501,  49], [513,  77], [516, 527], [521, 448], [530,  55], [555, 449], [560, 202], [560, 248], [561, 617], [597, 280], [597, 447]];


      console.time("triangulate");
      var triangles = Delaunay.triangulate(vertices);
      console.timeEnd("triangulate");

      for(i = triangles.length; i; ) {
        ctx.beginPath();
        --i; ctx.moveTo(vertices[triangles[i]][0], vertices[triangles[i]][1]);
        --i; ctx.lineTo(vertices[triangles[i]][0], vertices[triangles[i]][1]);
        --i; ctx.lineTo(vertices[triangles[i]][0], vertices[triangles[i]][1]);
        ctx.closePath();
        ctx.stroke();
      }
    </script>
  </body>
</html>
